<?xml version="1.0" encoding="utf-8"?>

<odoo>
    
    <template id="portal_appraisal_feedbacks" name="Appraisals FeedBack">
         <t t-set="foo" t-value="2 + 1"/>
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True"/>
            <t t-call="portal.portal_searchbar">
                <t t-set="title">Appraisals Feedback</t>
            </t>
            <t t-if="not grouped_feedbacks">
                <div class="alert alert-warning mt8" role="alert">
                    There are no Appraisals Feedback.
                </div>
            </t>
            <t t-if="grouped_feedbacks">
                <t t-call="portal.portal_table">
                    <t t-foreach="grouped_feedbacks" t-as="feedbacks">
                        <thead>
                            <tr t-attf-class="{{'thead-light' if not groupby == 'none' else ''}}">
                                <th class="text-left">No#</th>
                                 <th class="text-left">Employee</th>
                                <th class="text-left">Mid Year Review Date</th>
                                <th class="text-left">End Year Review Date</th>
                                <th class="text-left">Performance Period</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="feedbacks" t-as="feedback">   
                            <t t-if="feedback.name.user_id.id == uid">   
                                
                                <tr>
                                      <td class="text-left">
                                        #<span t-esc="feedback.id" />
                                    </td>
                                     <td>
                                        <a t-attf-href="/appraisal/feedback/#{feedback.id}?{{ keep_query() }}"><span t-field="feedback.name.name"/></a>
                                    </td>                                   
                                     
                                   <td class="text-left">
                                        <span t-esc="feedback.mid_year_date"  t-options='{"widget": "date"}' />
                                    </td>
                                    
                                     <td class="text-left">
                                        <span t-esc="feedback.end_year_date"  t-options='{"widget": "date"}' />
                                    </td>
                                    <td class="text-left">
                                        <span t-esc="feedback.performance_period" />
                                    </td>

                            
                                </tr>
                            </t>
                                <t t-if="feedback.name.parent_id.user_id.id == uid">   
                                
                                <tr>
                                      <td class="text-left">
                                        #<span t-esc="feedback.id" />
                                    </td>
                                     <td>
                                        <a t-attf-href="/appraisal/feedback/#{feedback.id}?{{ keep_query() }}"><span t-field="feedback.name.name"/></a>
                                    </td>                                   
                                     
                                   <td class="text-left">
                                        <span t-esc="feedback.mid_year_date"  t-options='{"widget": "date"}' />
                                    </td>
                                    
                                     <td class="text-left">
                                        <span t-esc="feedback.end_year_date"  t-options='{"widget": "date"}' />
                                    </td>
                                    <td class="text-left">
                                        <span t-esc="feedback.performance_period" />
                                    </td>

                            
                                </tr>
                            </t>
                                
                                <t t-if="feedback.name.parent_id.user_id.id != uid">
                                <t t-if="feedback.name.department_id.manager_id.user_id.id == uid">   
                                
                                <tr>
                                      <td class="text-left">
                                        #<span t-esc="feedback.id" />
                                    </td>
                                     <td>
                                        <a t-attf-href="/appraisal/feedback/#{feedback.id}?{{ keep_query() }}"><span t-field="feedback.name.name"/></a>
                                    </td>                                   
                                     
                                   <td class="text-left">
                                        <span t-esc="feedback.mid_year_date" t-options='{"widget": "date"}' />
                                    </td>
                                    
                                     <td class="text-left">
                                        <span t-esc="feedback.end_year_date" t-options='{"widget": "date"}' />
                                    </td>
                                    <td class="text-left">
                                        <span t-esc="feedback.performance_period" />
                                    </td>

                            
                                </tr>
                            </t>
                                    </t>
                                
                            </t>    

                           
                        </tbody>
                    </t>
                </t>
            </t>   
        </t>
    </template>
    
    
    
    
    <template id="portal_appraisal_feedback" name="Appraisal feedback">
        <t t-call="portal.portal_layout">
            <div id="wrap">
                                         
            <div class="oe_structure" data-oe-model="ir.ui.view" data-oe-id="2052" data-oe-field="arch" data-oe-xpath="/t[1]/t[1]/div[1]/div[1]">
                <section class="s_title parallax s_parallax_is_fixed bg-white-100 pt24 pb24" data-vcss="001" data-snippet="s_title" data-scroll-background-ratio="1">
                            <span class="s_parallax_bg oe_img_bg" style="background-image: url('/web/image/website.s_banner_default_image'); background-position: 50% 0;"></span>
                        <div class="o_we_bg_filter bg-white-50"></div>
                                    
                    <div class="container">
                        <h1 style="margin-left:10px">Feedback</h1>
                    </div>
                </section>
            </div>
              
            <form id="feedbackForm"  action="/appraisal/feedback/save"  method="post"  enctype="multipart/form-data">
             
                <div class="form-group col-12 s_website_form_submit" data-name="Submit Button">
                        <div style="width: 200px;" class="s_website_form_label"></div>
                        
                         <button id='feedbacksubmit' type="submit" class="btn btn-primary pull-left">Submit</button>                 
                </div>
                    <br/>
                                
                        <div class="container">
                        </div>    
               <div class="s_website_form_rows row s_col_no_bgcolor">
                    <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                        <div class="row s_col_no_resize s_col_no_bgcolor">
                            <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="employee_objective">
                                         <span class="s_website_form_label_content">Employee</span>
                            </label>
                        <div class="col-sm">
                            <t t-esc="employee_name.name"    />
                                <input type="hidden" class="form-control s_website_form_input" name="employee_id"   t-att-value='employee_name.id' />   
                                </div>
                            </div>
                        </div>
                                    
                <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                <div class="row s_col_no_resize s_col_no_bgcolor">
                        <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="manager_Employeee">
                                <span class="s_website_form_label_content">Manager</span>
                        </label>
                        <div class="col-sm">
                                <t t-esc="managers"    />
                        </div>
                  </div>
                </div>
               </div>
                
                <div class="s_website_form_rows row s_col_no_bgcolor">
                    <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                        <div class="row s_col_no_resize s_col_no_bgcolor">
                            <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="employee_objective">
                                         <span class="s_website_form_label_content">Employee Code</span>
                            </label>
                        <div class="col-sm">
                            <t t-esc="employee_name.emp_number"    />
                                
                                </div>
                            </div>
                        </div>
                                    
                <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                <div class="row s_col_no_resize s_col_no_bgcolor">
                        <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="manager_Employeee">
                                <span class="s_website_form_label_content">Department</span>
                        </label>
                        <div class="col-sm">
                                <t t-esc="employee_name.department_id.name"    />
                        </div>
                  </div>
                </div>
               </div>  
                
                 <div class="s_website_form_rows row s_col_no_bgcolor">
                    <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                        <div class="row s_col_no_resize s_col_no_bgcolor">
                            <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="employee_objective">
                                         <span class="s_website_form_label_content">Grade</span>
                            </label>
                        <div class="col-sm">
                            <t t-esc="employee_name.grade_designation.name"/>
                                
                                </div>
                            </div>
                        </div>
                                    
                <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                <div class="row s_col_no_resize s_col_no_bgcolor">
                        <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="manager_Employeee">
                            <span class="s_website_form_label_content">Job Position</span>
                        </label>
                        <div class="col-sm">
                                <t t-esc="employee_name.job_id.name"    />
                        </div>
                  </div>
                </div>
               </div>  
               <div class="s_website_form_rows row s_col_no_bgcolor">
                    <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                        <div class="row s_col_no_resize s_col_no_bgcolor">
                            <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="employee_objective">
                                         <span class="s_website_form_label_content">Employee Type</span>
                            </label>
                        <div class="col-sm">
                            <t t-esc="employee_name.emp_type"/>
                                
                                </div>
                            </div>
                        </div>
                                    
                <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                <div class="row s_col_no_resize s_col_no_bgcolor">
                        <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="manager_Employeee">
                                <span class="s_website_form_label_content">Date Of Joining</span>
                        </label>
                        <div class="col-sm">
                                <t t-esc="employee_name.date"    t-options='{"widget": "date"}'/>
                        </div>
                  </div>
                </div>
               </div> 
                
                <div class="s_website_form_rows row s_col_no_bgcolor">
                 <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                     <div class="row s_col_no_resize s_col_no_bgcolor">
                           <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="mid_year_date">
                                <span class="s_website_form_label_content">Mid Year Review Date</span>
                            </label>
                     <div class="col-sm">
                        <t t-esc="feedback.mid_year_date" t-options='{"widget": "date"}'/>                                
                     </div>
                  </div>
                </div>
                                    
                <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                <div class="row s_col_no_resize s_col_no_bgcolor">
                        <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="manager_Employeee">
                                <span class="s_website_form_label_content">End Year Review Date</span>
                        </label>
                        <div class="col-sm">
                        <t t-esc="feedback.mid_year_date" t-options='{"widget": "date"}'/>                                         </div>
                  </div>
                </div>
               </div>  
                
                                
                <div class="s_website_form_rows row s_col_no_bgcolor">
                 <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                     <div class="row s_col_no_resize s_col_no_bgcolor">
                           <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="mid_year_date">
                                <span class="s_website_form_label_content">Mid Year Deadline Date</span>
                            </label>
                     <div class="col-sm">
                        <t t-esc="feedback.date_mid_deadline" t-options='{"widget": "date"}'/>                                
                     </div>
                  </div>
                </div>
                                    
                <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                <div class="row s_col_no_resize s_col_no_bgcolor">
                        <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="manager_Employeee">
                                <span class="s_website_form_label_content">End Year Deadline Date</span>
                        </label>
                        <div class="col-sm">
                        <t t-esc="feedback.date_end_deadline" t-options='{"widget": "date"}'/>                                         </div>
                  </div>
                </div>
               </div> 
                
                <div class="s_website_form_rows row s_col_no_bgcolor">
                    <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                        <div class="row s_col_no_resize s_col_no_bgcolor">
                            <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="employee_objective">
                                <span class="s_website_form_label_content">Training Need</span>
                            </label>
                        <div class="col-sm">                        
                            <t t-esc="feedback.training_need" />                                
                                </div>
                            </div>
                        </div>
                                    
                <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                <div class="row s_col_no_resize s_col_no_bgcolor">
                       <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="employee_objective">
                            <span class="s_website_form_label_content">career aspirations in next 2 to 3 years</span>
                        </label>
                        <div class="col-sm">                        
                            <t t-esc="feedback.future_aspiration" />                                
                        </div>
                  </div>
                </div>
               </div>
                
                <div class="s_website_form_rows row s_col_no_bgcolor">
                    <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                        <div class="row s_col_no_resize s_col_no_bgcolor">
                            <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="employee_objective">
                                <span class="s_website_form_label_content">Feedback to line manager</span>
                            </label>
                        <div class="col-sm">                        
                            <t t-esc="feedback.feedback_to_manager" />                                
                                </div>
                            </div>
                        </div>
                                    
                   <div class="form-group col-6 s_website_form_field" data-type="char" data-name="Field">
                     <div class="row s_col_no_resize s_col_no_bgcolor">
                       
                     </div>
                   </div>
               </div>
                
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/> 

                <input id='recordid' type="hidden" class="form-control s_website_form_input" name="record_id"   t-att-value="feedback.id"/>
                
                </form> 
                 <div >
                 
                  <t t-set='sr_count' t-value='0'/>   
                  <t t-foreach="feedback.objective_lines" t-as="line"> 
                    <section class="s_text_image pt32 pb32 o_colored_level"  style='box-shadow:3px;' data-snippet="s_image_text" data-name="Image - Text">
                     
                    <div class="container" style='box-shadow:3px;'>                      
                      <div class="row align-items-center">
                        <div class="col-lg-12 pt16 pb16 o_colored_level col-lg-12 border rounded shadow">
                            <div data-snippet="s_share"  data-name="Share">
                                <i class="badge badge-pill badge-info pull-right" ><t t-esc='line.rating_level'/></i>            
                            </div>  
                            <br/>
                             <h2><t t-esc='line.objective'/></h2>
                              <p class="o_default_snippet_text"><t t-esc='remarks'/></p>
                              <p class="o_default_snippet_text"><i class="badge badge-pill badge-info" ><t t-esc='remarks_mngr'/></i></p>                  
                            
                              <div>                                  
                                 <div data-snippet="s_share"  data-name="Share">
                                     <i class="badge badge-pill badge-success pull-left" ><t t-esc='line.weightage'/> %</i>           
                                                      
                                     <a t-attf-href="/edit/feedback/line/#{line.id}?" class="fa fa-pencil-square-o pull-right" style="font-size:20px;color:green"></a>
                                </div>
                                </div>      
                        </div>
                      </div>
                    </div>
                  </section> 
                 </t>     
                </div>                    
            <div class="mt32">
                <h4><strong>Message and communication history</strong></h4>
                <t t-call="portal.message_thread">
                    <t t-set="object" t-value="appraisal"/>
                    <t t-set="pid" t-value="pid"/>
                    <t t-set="hash" t-value="hash"/>
                </t>
            </div>
                </div>    
        </t>    
    </template> 
     


</odoo>


